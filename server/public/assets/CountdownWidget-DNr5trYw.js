import{d as F,u as I,r as g,c as z,y as Y,o as W,a as s,e as a,E as $,b as f,g as e,l as j,m as S,F as T,h as q,p as v,t as r,f as B,T as G,j as _}from"./index--aZVXybM.js";const H={class:"p-5 flex flex-col gap-4"},J={class:"grid grid-cols-3 gap-2"},K=["onClick"],P={key:1,class:"w-full h-full flex flex-col items-center justify-center p-2 relative z-10"},Q={class:"text-xs font-medium opacity-80 mb-1 uppercase tracking-wider truncate max-w-full"},R={class:"flex flex-col items-center"},X={class:"flex flex-col items-center"},Z={class:"bg-white/20 backdrop-blur rounded px-1.5 py-1 text-xl font-bold font-mono min-w-[2.5rem] text-center"},ee={class:"flex flex-col items-center"},te={class:"bg-white/20 backdrop-blur rounded px-1.5 py-1 text-xl font-bold font-mono min-w-[2.5rem] text-center"},le={key:1,class:"flex flex-col items-center"},ae={key:0,class:"text-sm font-normal text-gray-400 ml-1"},se={key:0,class:"text-xs text-gray-400"},oe={key:1,class:"text-sm font-mono text-gray-500 mt-1"},ne={key:2,class:"flex flex-col items-center"},re={key:0,class:"text-lg"},ie={key:0,class:"text-xs text-pink-300 drop-shadow-[0_0_2px_rgba(236,72,153,0.5)]"},de={key:1,class:"text-lg font-mono text-pink-300 drop-shadow-[0_0_2px_rgba(236,72,153,0.5)] mt-1"},ue={key:3,class:"absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-sm z-10"},fe=F({__name:"CountdownWidget",props:{widget:{}},setup(d){const x=d,b=I();(()=>{const l=b.widgets.find(t=>t.id===x.widget.id);l&&!l.data&&(l.data={targetDate:"",title:"ÈáçË¶ÅÊó∂Âàª",style:"card"})})();const p=g(!1),u=g({targetDate:"",title:"",style:"card"}),D=()=>{const l=x.widget.data||{targetDate:"",title:"ÈáçË¶ÅÊó∂Âàª",style:"card"};u.value={...l},p.value=!0},m=g(!1),L=l=>{l.target===l.currentTarget&&(m.value=!0)},V=l=>{m.value&&l.target===l.currentTarget&&w(),m.value=!1},w=()=>{const l=b.widgets.find(t=>t.id===x.widget.id);l&&(l.data={...l.data,...u.value},b.saveData(),C()),p.value=!1},n=g({days:0,hours:0,minutes:0,seconds:0,daysCeil:0}),y=g(!1);let h=null;const N=[{label:"Âç°ÁâáÈ£éÊ†º",value:"card"},{label:"ÊûÅÁÆÄÊñáÂ≠ó",value:"simple"},{label:"ÈúìËôπÂÖâÊïà",value:"neon"}],i=z(()=>(x.widget.colSpan??1)<=1&&(x.widget.rowSpan??1)<=1),k=z(()=>i.value?n.value.daysCeil:n.value.days),C=()=>{if(!x.widget.data?.targetDate){n.value={days:0,hours:0,minutes:0,seconds:0,daysCeil:0};return}try{const l=new Date(x.widget.data.targetDate).getTime(),t=new Date().getTime(),o=l-t;if(o<=0){n.value={days:0,hours:0,minutes:0,seconds:0,daysCeil:0},y.value=!0;return}y.value=!1;const M=Math.floor(o/(1e3*60*60*24)),U=Math.floor(o%(1e3*60*60*24)/(1e3*60*60)),E=Math.floor(o%(1e3*60*60)/(1e3*60)),O=Math.floor(o%(1e3*60)/1e3),A=Math.ceil(o/(1e3*60*60*24));n.value={days:M,hours:U,minutes:E,seconds:O,daysCeil:A}}catch(l){console.error("Countdown calculation error:",l)}};Y(()=>{C(),h=setInterval(C,1e3)}),W(()=>{h&&clearInterval(h)});const c=l=>l.toString().padStart(2,"0");return(l,t)=>(a(),s("div",{class:v(["w-full h-full relative group overflow-hidden rounded-2xl transition-all select-none",[d.widget.data?.style==="neon"?"bg-gray-900 text-white border border-purple-500/30":d.widget.data?.style==="simple"?"bg-white/90 text-gray-800 border border-white/40":"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg border border-white/10"]])},[(a(),$(G,{to:"body"},[p.value?(a(),s("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",onMousedown:L,onMouseup:V},[e("div",{class:"bg-white text-gray-800 rounded-xl shadow-2xl w-full max-w-sm overflow-hidden flex flex-col animate-fade-in-up",onMousedown:t[2]||(t[2]=B(()=>{},["stop"]))},[e("div",{class:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50"},[t[4]||(t[4]=e("div",{class:"font-bold text-lg"},"ÂÄíËÆ°Êó∂ËÆæÁΩÆ",-1)),e("button",{onClick:w,class:"text-gray-400 hover:text-gray-600"},[...t[3]||(t[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])]),e("div",H,[e("div",null,[t[5]||(t[5]=e("label",{class:"text-xs font-bold text-gray-500 uppercase tracking-wider block mb-1.5"},"Ê†áÈ¢ò",-1)),j(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>u.value.title=o),class:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all",placeholder:"‰æãÂ¶ÇÔºöÊò•ËäÇ"},null,512),[[S,u.value.title]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"text-xs font-bold text-gray-500 uppercase tracking-wider block mb-1.5"},"ÁõÆÊ†áÊó∂Èó¥",-1)),j(e("input",{type:"datetime-local","onUpdate:modelValue":t[1]||(t[1]=o=>u.value.targetDate=o),class:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all"},null,512),[[S,u.value.targetDate]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"text-xs font-bold text-gray-500 uppercase tracking-wider block mb-1.5"},"È£éÊ†º",-1)),e("div",J,[(a(),s(T,null,q(N,o=>e("button",{key:o.value,onClick:M=>u.value.style=o.value,class:v(["px-2 py-2 text-xs font-medium rounded-lg border transition-all text-center",u.value.style===o.value?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300 text-gray-600"])},r(o.label),11,K)),64))])])]),e("div",{class:"p-4 bg-gray-50 border-t border-gray-100"},[e("button",{onClick:w,class:"w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-bold transition-colors shadow-sm"}," ‰øùÂ≠òËÆæÁΩÆ ")])],32)],32)):f("",!0)])),d.widget.data?.targetDate?(a(),s("div",P,[e("button",{onClick:B(D,["stop"]),class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-black/10 active:scale-95 z-20",title:"ËÆæÁΩÆ"},[...t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4"},[e("path",{"fill-rule":"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567l-.091.549a.798.798 0 01-.517.608 7.45 7.45 0 00-.478.198.798.798 0 01-.796-.064l-.453-.324a1.875 1.875 0 00-2.416.2l-.043.044a1.875 1.875 0 00-.204 2.416l.325.454a.798.798 0 01.064.796 7.448 7.448 0 00-.198.478.798.798 0 01-.608.517l-.55.092a1.875 1.875 0 00-1.566 1.849v.044c0 .917.663 1.699 1.567 1.85l.549.091c.281.047.508.25.608.517.06.162.127.321.198.478a.798.798 0 01-.064.796l-.324.453a1.875 1.875 0 00.2 2.416l.044.043a1.875 1.875 0 002.416.204l.454-.325a.798.798 0 01.796-.064c.157.071.316.137.478.198.267.1.47.327.517.608l.092.55c.15.903.932 1.566 1.849 1.566h.044c.917 0 1.699-.663 1.85-1.567l.091-.549a.798.798 0 01.517-.608 7.52 7.52 0 00.478-.198.798.798 0 01.796.064l.453.324a1.875 1.875 0 002.416-.2l.043-.044a1.875 1.875 0 00.204-2.416l-.325-.454a.798.798 0 01-.064-.796c.071-.157.137-.316.198-.478.1-.267.327-.47.608-.517l.55-.092a1.875 1.875 0 001.566-1.849v-.044c0-.917-.663-1.699-1.567-1.85l-.549-.091a.798.798 0 01-.608-.517 7.507 7.507 0 00-.198-.478.798.798 0 01.064-.796l.324-.453a1.875 1.875 0 00-.2-2.416l-.044-.043a1.875 1.875 0 00-2.416-.204l-.454.325a.798.798 0 01-.796.064 7.462 7.462 0 00-.478-.198.798.798 0 01-.517-.608l-.092-.55a1.875 1.875 0 00-1.849-1.566h-.044zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z","clip-rule":"evenodd"})],-1)])]),e("div",Q,r(d.widget.data.title||"ÂÄíËÆ°Êó∂"),1),d.widget.data.style==="card"?(a(),s("div",{key:0,class:v(["flex items-center gap-1.5",{"flex-col gap-0 justify-center":i.value}])},[e("div",R,[e("div",{class:v(["bg-white/20 backdrop-blur rounded px-1.5 py-1 text-xl font-bold font-mono min-w-[2.5rem] text-center",{"text-3xl min-w-[3.5rem] py-2":i.value}])},r(k.value),3),t[10]||(t[10]=e("span",{class:"text-[10px] opacity-80 mt-0.5"},"Â§©",-1))]),i.value?f("",!0):(a(),s(T,{key:0},[t[13]||(t[13]=e("div",{class:"text-xl font-bold -mt-3"},":",-1)),e("div",X,[e("div",Z,r(c(n.value.hours)),1),t[11]||(t[11]=e("span",{class:"text-[10px] opacity-80 mt-0.5"},"Êó∂",-1))]),t[14]||(t[14]=e("div",{class:"text-xl font-bold -mt-3"},":",-1)),e("div",ee,[e("div",te,r(c(n.value.minutes)),1),t[12]||(t[12]=e("span",{class:"text-[10px] opacity-80 mt-0.5"},"ÂàÜ",-1))])],64))],2)):d.widget.data.style==="simple"?(a(),s("div",le,[e("div",{class:v(["font-bold font-mono text-blue-600",i.value?"text-5xl":"text-4xl"])},[_(r(k.value),1),i.value?f("",!0):(a(),s("span",ae,"Â§©"))],2),i.value?(a(),s("div",se,"Â§©")):(a(),s("div",oe,r(c(n.value.hours))+":"+r(c(n.value.minutes))+":"+r(c(n.value.seconds)),1))])):d.widget.data.style==="neon"?(a(),s("div",ne,[e("div",{class:v(["font-bold font-mono text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400 drop-shadow-[0_0_5px_rgba(168,85,247,0.5)]",i.value?"text-5xl":"text-3xl"])},[_(r(k.value)+" ",1),i.value?f("",!0):(a(),s("span",re,"DAY"))],2),i.value?(a(),s("div",ie," DAYS ")):(a(),s("div",de,r(c(n.value.hours))+":"+r(c(n.value.minutes))+":"+r(c(n.value.seconds)),1))])):f("",!0),y.value?(a(),s("div",ue,[...t[15]||(t[15]=[e("span",{class:"text-xl font-bold text-white"},"üéâ Â∑≤Âà∞Ëææ",-1)])])):f("",!0)])):(a(),s("div",{key:0,class:"w-full h-full flex flex-col items-center justify-center cursor-pointer hover:bg-black/10 transition-colors p-2 text-center",onClick:D},[...t[8]||(t[8]=[e("div",{class:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center mb-2 backdrop-blur-sm"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-white",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})])],-1),e("span",{class:"text-xs font-bold text-white/90"},"ÁÇπÂáªÈÖçÁΩÆÂÄíËÆ°Êó∂",-1)])]))],2))}});export{fe as default};
