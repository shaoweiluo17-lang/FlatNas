import{d as C,u as M,r as c,w as B,x as N,a as r,b as p,e as i,g as e,F as S,t as g,i as m,l as x,m as b,n as h}from"./index-CwNRDDxv.js";const V="/ICON.PNG",j={key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4"},K={class:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden transform transition-all scale-100"},R={class:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"},D={class:"text-lg font-bold text-gray-800 flex items-center gap-2"},F={key:0},T={class:"p-6"},U={class:"mb-5 space-y-4"},q={key:0},z={key:0,class:"mt-4 text-center"},G=C({__name:"LoginModal",props:{show:{type:Boolean}},emits:["update:show"],setup(v,{emit:w}){const k=v,_=w,o=M(),a=c(""),s=c(""),l=c(!1),d=c(null);B(()=>k.show,n=>{n&&(a.value="",s.value="",l.value=!1,N(()=>{if(o.systemConfig.authMode==="multi"){const t=document.querySelector('input[placeholder="ç”¨æˆ·å"]');t?t.focus():d.value?.focus()}else d.value?.focus()}))});const y=()=>_("update:show",!1),f=async()=>{if(o.systemConfig.authMode==="multi"&&!a.value.trim()){alert("è¯·è¾“å…¥ç”¨æˆ·å");return}if(!s.value){alert("è¯·è¾“å…¥å¯†ç ");return}try{l.value?(await o.register(a.value,s.value),alert("æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•"),l.value=!1,s.value=""):await o.login(a.value,s.value)&&y()}catch(n){alert(n.message||"æ“ä½œå¤±è´¥ï¼"),s.value=""}};return(n,t)=>v.show?(i(),r("div",j,[e("div",K,[e("div",R,[e("h3",D,[l.value?(i(),r("span",F,"ğŸ‘¤ æ–°ç”¨æˆ·æ³¨å†Œ")):(i(),r(S,{key:1},[t[3]||(t[3]=e("img",{src:V,class:"w-6 h-6 object-contain",alt:"lock"},null,-1)),e("span",null,g(m(o).systemConfig.authMode==="single"?"ç®¡ç†å‘˜ç™»å½•":"ç”¨æˆ·ç™»å½•"),1)],64))]),e("button",{onClick:y,class:"text-gray-400 hover:text-gray-600 text-2xl leading-none"}," Ã— ")]),e("div",T,[e("div",U,[m(o).systemConfig.authMode==="multi"?(i(),r("div",q,[x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>a.value=u),type:"text",placeholder:"ç”¨æˆ·å",class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all text-center text-lg tracking-widest",onKeyup:h(f,["enter"])},null,544),[[b,a.value]])])):p("",!0),e("div",null,[x(e("input",{ref_key:"inputRef",ref:d,"onUpdate:modelValue":t[1]||(t[1]=u=>s.value=u),type:"password",placeholder:"å¯†ç ",class:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all text-center text-lg tracking-widest",onKeyup:h(f,["enter"])},null,544),[[b,s.value]])])]),e("button",{onClick:f,class:"w-full bg-gray-800 text-white py-3 rounded-xl font-bold hover:bg-black active:scale-95 transition-all shadow-lg"},g(l.value?"æ³¨ å†Œ":"ç™» å½•"),1),m(o).systemConfig.authMode==="multi"?(i(),r("div",z,[e("button",{onClick:t[2]||(t[2]=u=>l.value=!l.value),class:"text-sm text-gray-500 hover:text-gray-800 hover:underline transition-colors"},g(l.value?"å·²æœ‰è´¦å·ï¼Ÿå»ç™»å½•":"æ²¡æœ‰è´¦å·ï¼Ÿå»æ³¨å†Œ"),1)])):p("",!0)])])])):p("",!0)}});export{G as default};
