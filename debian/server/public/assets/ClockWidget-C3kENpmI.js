import{d as B,u as j,w as T,c as o,r as X,y as q,o as E,a,e as i,g as t,b as N,p,f as F,t as f,F as $,h as C,q as O}from"./index-CEb9R0bB.js";const Z={key:0,class:"w-full h-full flex flex-col items-center justify-center"},H={class:"text-4xl font-mono font-bold"},U={class:"text-sm opacity-80 mt-1"},W={key:1,class:"w-full h-full flex items-center justify-center p-2"},A={class:"relative w-full max-w-[140px] aspect-square"},G={viewBox:"0 0 100 100",class:"w-full h-full drop-shadow-md"},J=["transform"],K=["transform"],P=["transform"],Q=["transform"],R={key:2,class:"w-full h-full flex items-center justify-center p-2"},Y={class:"relative w-full max-w-[140px] aspect-square"},_={viewBox:"0 0 100 100",class:"w-full h-full drop-shadow-lg relative z-10"},tt=["transform"],et=["transform"],lt=["transform"],ot=["transform"],at=B({__name:"ClockWidget",props:{widget:{}},setup(l){const s=l,L=j();s.widget.data||(s.widget.data={style:"digital"}),T(()=>s.widget.data,n=>{n||(s.widget.data={style:"digital"})},{deep:!0});const u=["digital","analog","retro"],S=o(()=>{const n=s.widget.data?.style||"digital";return u.indexOf(n)===-1?0:u.indexOf(n)}),z=()=>{s.widget.data||(s.widget.data={});const n=(S.value+1)%u.length;s.widget.data.style=u[n],L.saveData()},r=X(new Date);let d=null;const g=()=>{r.value=new Date},w=()=>{g(),d&&clearInterval(d),d=setInterval(g,1e3)},y=()=>{d&&clearInterval(d),d=null},v=()=>{document.visibilityState==="hidden"?y():w()};q(()=>{w(),document.addEventListener("visibilitychange",v)}),E(()=>{y(),document.removeEventListener("visibilitychange",v)});const D=o(()=>r.value.toLocaleTimeString("zh-CN",{hour12:!1})),M=o(()=>r.value.toLocaleDateString()),m=o(()=>r.value.getSeconds()+r.value.getMilliseconds()/1e3),x=o(()=>r.value.getMinutes()+m.value/60),V=o(()=>r.value.getHours()%12+x.value/60),h=o(()=>m.value*6),b=o(()=>x.value*6),k=o(()=>V.value*30);return(n,e)=>(i(),a("div",{class:p(["w-full h-full relative group transition-all overflow-hidden rounded-2xl border border-white/10",[l.widget.data?.style==="digital"?`backdrop-blur hover:bg-black/30 ${l.widget.textColor?"":"text-white"}`:l.widget.data?.style==="retro"?`${l.widget.textColor?"":"text-gray-900"} border-[#8b5a2b]`:`${l.widget.textColor?"":"text-gray-800"}`]]),style:O({backgroundColor:l.widget.data?.style==="digital"?`rgba(0, 0, 0, ${l.widget.opacity??.2})`:l.widget.data?.style==="retro"?`rgba(232, 220, 196, ${l.widget.opacity??1})`:`rgba(255, 255, 255, ${l.widget.opacity??.9})`,color:l.widget.textColor})},[t("button",{onClick:F(z,["stop"]),class:p(["absolute top-2 right-2 z-20 opacity-0 group-hover:opacity-100 transition-opacity p-1.5 rounded-full hover:bg-black/10 active:scale-95",l.widget.data?.style==="digital"?"text-white":"text-gray-600"]),title:"切换风格"},[...e[0]||(e[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"})],-1)])],2),l.widget.data?.style==="digital"?(i(),a("div",Z,[t("div",H,f(D.value),1),t("div",U,f(M.value),1)])):l.widget.data?.style==="analog"?(i(),a("div",W,[t("div",A,[(i(),a("svg",G,[e[2]||(e[2]=t("circle",{cx:"50",cy:"50",r:"48",fill:"white",stroke:"#e5e7eb","stroke-width":"2"},null,-1)),(i(),a($,null,C(12,c=>t("g",{key:c,transform:`rotate(${c*30} 50 50)`},[...e[1]||(e[1]=[t("line",{x1:"50",y1:"6",x2:"50",y2:"10",stroke:"#374151","stroke-width":"2","stroke-linecap":"round"},null,-1)])],8,J)),64)),t("line",{x1:"50",y1:"50",x2:"50",y2:"25",stroke:"#1f2937","stroke-width":"3","stroke-linecap":"round",transform:`rotate(${k.value} 50 50)`},null,8,K),t("line",{x1:"50",y1:"50",x2:"50",y2:"15",stroke:"#4b5563","stroke-width":"2","stroke-linecap":"round",transform:`rotate(${b.value} 50 50)`},null,8,P),t("line",{x1:"50",y1:"50",x2:"50",y2:"10",stroke:"#ef4444","stroke-width":"1","stroke-linecap":"round",transform:`rotate(${h.value} 50 50)`},null,8,Q),e[3]||(e[3]=t("circle",{cx:"50",cy:"50",r:"2",fill:"#ef4444"},null,-1))]))])])):l.widget.data?.style==="retro"?(i(),a("div",R,[t("div",Y,[e[8]||(e[8]=t("div",{class:"absolute -top-1 left-1/2 -translate-x-1/2 w-4 h-4 border-2 border-[#8b5a2b] rounded-full z-0"},null,-1)),e[9]||(e[9]=t("div",{class:"absolute -top-0.5 left-1/2 -translate-x-1/2 w-2 h-1 bg-[#8b5a2b] z-0"},null,-1)),(i(),a("svg",_,[e[4]||(e[4]=t("circle",{cx:"50",cy:"50",r:"48",fill:"#fcf8ed",stroke:"#8b5a2b","stroke-width":"3"},null,-1)),e[5]||(e[5]=t("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#d4b483","stroke-width":"1"},null,-1)),(i(),a($,null,C(["XII","I","II","III","IV","V","VI","VII","VIII","IX","X","XI"],(c,I)=>t("text",{key:I,x:"50",y:"16","text-anchor":"middle",class:"text-[8px] font-serif font-bold fill-[#5c3a1e]",transform:`rotate(${I*30} 50 50)`},f(c),9,tt)),64)),e[6]||(e[6]=t("circle",{cx:"50",cy:"50",r:"25",fill:"none",stroke:"#e8dcc4","stroke-width":"0.5"},null,-1)),t("path",{d:"M48,50 L50,28 L52,50 Z",fill:"#2c1810",transform:`rotate(${k.value} 50 50)`},null,8,et),t("path",{d:"M49,50 L50,18 L51,50 Z",fill:"#2c1810",transform:`rotate(${b.value} 50 50)`},null,8,lt),t("line",{x1:"50",y1:"50",x2:"50",y2:"12",stroke:"#8b5a2b","stroke-width":"0.5",transform:`rotate(${h.value} 50 50)`},null,8,ot),e[7]||(e[7]=t("circle",{cx:"50",cy:"50",r:"1.5",fill:"#8b5a2b"},null,-1))]))])])):N("",!0)],6))}});export{at as default};
