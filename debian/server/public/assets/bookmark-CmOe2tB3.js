const L=y=>{const S=y.replace(/<p>/gi,"").replace(/<\/p>/gi,""),p=new DOMParser().parseFromString(S,"text/html"),i=a=>{const o=[],r=Array.from(a.children);for(let e=0;e<r.length;e++){const s=r[e];if(s&&s.tagName.toLowerCase()==="dt"){const f=s.querySelector("h3"),c=s.querySelector("a");if(f){const n=f.textContent||"Untitled Folder";let t=[];const m=s.querySelector("dl");if(m)t=i(m);else for(let h=e+1;h<r.length;h++){const l=r[h];if(!l)continue;const d=l.tagName.toLowerCase();if(d==="dl"){t=i(l);break}else if(d==="dd"){const g=l.querySelector("dl");g&&(t=i(g));break}else if(d==="dt")break}o.push({id:Date.now()+Math.random().toString(36).substr(2,9),title:n,type:"category",children:t,collapsed:!1})}else if(c){const n=c.href;if(!n.startsWith("http"))continue;let t=c.getAttribute("icon");if(!t)try{t=`https://api.uomg.com/api/get.favicon?url=${new URL(n).hostname}`}catch{t=""}o.push({id:Date.now()+Math.random().toString(36).substr(2,9),title:c.textContent||n,url:n,icon:t||"",type:"link"})}}}return o},u=p.querySelector("dl");if(!u){const a=p.querySelectorAll("a"),o=[];return a.forEach(r=>{const e=r.href;e.startsWith("http")&&o.push({id:Date.now()+Math.random().toString(36).substr(2,9),title:r.textContent||e,url:e,icon:"",type:"link"})}),o}return i(u)};export{L as p};
